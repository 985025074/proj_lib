# wireshark 书阅读笔记

## 捕获过滤器

捕获 选项 设备最右侧可以选择 可以输入如:
port 80

## 对应语法 EBF

跟C 语言一样 表示逻辑关系
src host 192.168.0.10 && port 80

### 限定地址

host ip
ether host mac

### 传输方向的限定

src host ip..
dst host ip..

### port 过滤类似与地址限定，只需要把host 换成port
此处略过

### 数据包字节比较

icmp[0:2]==0x0301
意味着进行前两个字节比较。

#### TCP 捕获 RST 数据包实例

tcp[13]&4==4
&4 意思是 第四位flag

## 显示过滤器  

显示过滤器 语法类似 但是使用or and not 

## 过滤器常用选项save

捕获过滤器： 捕获-> 捕获过滤器->修改
显示～:查看 + 号 首选项 即可打开

## 统计消息 statiscs 好处多

有endpoint端点设备统计 + 会话统计

## 首选项中配置 name resolution

- mac地址解析，如果失败。会尝试生成一个制造商名称.
- 解析传输名称（Resolve Transport name） ：这种类型的名称解
析尝试将一个端口号，转换成一个与其相关的名字。比如，将端口80
显示为http。当你碰到一个不常见的端口而又不知道这是什么协议的
时候，这个功能显得尤为便利。
- 解析网络名称（Resolve Network/IP name） ：这种类型的名称解
析试图转换第3层——网络层的地址，例如将IP地址192.168.1.50，转
换为一个易读的域名。假如域名具有高描述性，则对我们理解该系统
的目的或其所有者，将是非常有帮助的。

**重启之后才生效**

## 数据流图 IO 图

这些掠过了，就是一些统计数据

## 专家信息

这个感觉可能会很有用。包含了一些数据分析。

## 命令行 部分章节 暂时跳过

## 网络层协议分析

### ARP： 为什么需要ARP：
交换机使用一张表格CAM,来确定每个设备的地址。里面就是mac.他会负责进行IP 地址 到 MAC 地址 的转换。
#### ARP 实战
ARP 的基本过程就是：所有人 我的MAC + IP 是XXXX,请问谁的是XXXXX。然后符合这个地址的人会发出。而不符合的呢就会丢掉。

其中注意：请求者Ethernet层的MAC 地址是 FF.也就是广播地址。

#### 特殊ARP : gratuitous ARP

这种是自我宣布，我的ip地址变了。大家更新一下MAC + IP 的缓存记录吧。

### 局域网与 交换机

局域网：集线器 或者说交换机连接的网络： Lan.
路由器：负责将不同的局域网合并。

### IP

#### IP 地址

32位地址。其中每8位点分开。所以会有192.168.0.1 这种样子的地址出现

IP 地址 是用来确定复杂的网络的。
分为两个部分: 

- 网段地址
- 主机地址

前者，就是确定在那个局域网。后者意义显而易见。

确定那一部分是网段 那一部分是主机，就是靠子网掩码。

#### 重要字段之 TTL 存活时间

经过路由器就减去一。

